[gd_scene load_steps=11 format=3 uid="uid://b03dm5foy3tid"]

[ext_resource type="Script" path="res://Scenes/Game.gd" id="1_01bgg"]
[ext_resource type="PackedScene" uid="uid://bumue5pppiwug" path="res://Scenes/Maps/TestMap.tscn" id="1_82oit"]
[ext_resource type="PackedScene" uid="uid://degt6oc40mi1t" path="res://Scenes/Models/Player/Player.tscn" id="1_ctsb1"]
[ext_resource type="PackedScene" uid="uid://dlfpn58g0wlys" path="res://Scenes/UI/Debug.tscn" id="3_17a4f"]
[ext_resource type="PackedScene" uid="uid://bwcnco5r8xygd" path="res://Scenes/Models/TestEnemy/TestEnemy.tscn" id="4_qau5q"]
[ext_resource type="PackedScene" uid="uid://yb43ks5ned6a" path="res://Scenes/UI/NewInventory/inventory.tscn" id="5_nsixv"]
[ext_resource type="Script" path="res://Scenes/UI/OnScreen/OnScreen.cs" id="7_27c3j"]
[ext_resource type="Texture2D" uid="uid://ddc422hhrh3xp" path="res://Assets/Icons/add.svg" id="7_ma0te"]

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_bb8dq"]
border_width_left = 2
border_width_top = 2
border_width_right = 2
border_width_bottom = 2
border_color = Color(0, 0, 0, 1)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_64myj"]
bg_color = Color(0.192157, 0.537255, 0.207843, 1)
border_width_left = 2
border_width_top = 2
border_width_right = 2
border_width_bottom = 2
border_color = Color(0, 0, 0, 1)

[node name="Game" type="Node"]
script = ExtResource("1_01bgg")

[node name="TestMap" parent="." instance=ExtResource("1_82oit")]

[node name="Player" parent="TestMap" instance=ExtResource("1_ctsb1")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.633851, 0)

[node name="Skeleton3D" parent="TestMap/Player/Visuals/Armature" index="0"]
bones/0/position = Vector3(-0.256432, 0.443779, -98.772)
bones/0/rotation = Quaternion(-0.728669, -0.0470073, 0.0116529, 0.683151)
bones/1/rotation = Quaternion(-0.0281625, 0.0125121, 0.0236259, 0.999246)
bones/2/rotation = Quaternion(0.0109633, 0.000303991, 0.0144988, 0.999835)
bones/3/rotation = Quaternion(0.068408, 0.0015461, 0.0146263, 0.997549)
bones/4/rotation = Quaternion(0.0515387, -0.00103198, 0.00333958, 0.998665)
bones/5/rotation = Quaternion(-0.0732612, 0.00914082, -0.00240083, 0.997268)
bones/6/rotation = Quaternion(-0.598508, -0.434164, 0.50986, -0.439697)
bones/7/rotation = Quaternion(0.539025, 0.17625, 0.209149, 0.796646)
bones/8/rotation = Quaternion(-1.57265e-08, -5.31537e-08, 0.023465, 0.999725)
bones/9/rotation = Quaternion(0.039783, -0.276157, 0.0258089, 0.959942)
bones/11/rotation = Quaternion(-0.139948, 0.0843972, -0.236727, 0.957733)
bones/12/rotation = Quaternion(-0.122288, -0.0687552, 0.0245806, 0.989805)
bones/13/rotation = Quaternion(0.070383, 0.000463617, 0.00842081, 0.997484)
bones/14/rotation = Quaternion(0.150265, -9.68633e-07, -0.0154046, 0.988526)
bones/15/rotation = Quaternion(0.0720985, -1.30831e-07, -0.00738843, 0.99737)
bones/16/rotation = Quaternion(0.140525, -0.00387015, -0.0236814, 0.989786)
bones/17/rotation = Quaternion(0.149755, -2.17601e-08, -0.0153464, 0.988604)
bones/18/rotation = Quaternion(0.158549, -1.71125e-07, -0.0162474, 0.987218)
bones/19/rotation = Quaternion(0.185988, -0.0043847, -0.032531, 0.982004)
bones/20/rotation = Quaternion(0.180979, -1.56277e-06, -0.0185546, 0.983312)
bones/21/rotation = Quaternion(0.156175, -1.58418e-07, -0.0160043, 0.9876)
bones/22/rotation = Quaternion(0.236233, -0.0036322, -0.0490043, 0.970453)
bones/23/rotation = Quaternion(0.151345, -5.61497e-05, -0.0158746, 0.988354)
bones/24/rotation = Quaternion(0.143718, 3.30601e-05, -0.0145, 0.989513)
bones/25/rotation = Quaternion(0.602042, -0.4324, 0.525316, 0.417874)
bones/26/rotation = Quaternion(0.46128, -0.263426, -0.226866, 0.816308)
bones/27/rotation = Quaternion(1.36917e-06, 1.2425e-07, -0.0594459, 0.998232)
bones/28/rotation = Quaternion(0.0589232, 0.169911, -0.00167427, 0.983695)
bones/30/rotation = Quaternion(-0.141539, -0.0736946, 0.274156, 0.948353)
bones/31/rotation = Quaternion(-0.15514, 0.0745771, -0.026582, 0.984715)
bones/32/rotation = Quaternion(0.0653402, -0.000217446, -0.0118845, 0.997792)
bones/33/rotation = Quaternion(0.153236, 6.97791e-07, 0.012487, 0.988111)
bones/34/rotation = Quaternion(0.0710838, -5.42418e-08, 0.00579068, 0.997454)
bones/35/rotation = Quaternion(0.13354, 0.00404404, 0.0185153, 0.990862)
bones/36/rotation = Quaternion(0.156627, 2.71177e-07, 0.0127592, 0.987576)
bones/37/rotation = Quaternion(0.160905, 2.26905e-08, 0.0131079, 0.986883)
bones/38/rotation = Quaternion(0.179796, 0.00483317, 0.0261075, 0.983346)
bones/39/rotation = Quaternion(0.189081, 1.70383e-06, 0.0154107, 0.981841)
bones/40/rotation = Quaternion(0.157183, 8.50659e-08, 0.0128046, 0.987487)
bones/41/rotation = Quaternion(0.229905, 0.0043067, 0.0419154, 0.972301)
bones/42/rotation = Quaternion(0.154755, 1.3963e-06, 0.0126167, 0.987872)
bones/43/rotation = Quaternion(0.143774, -1.145e-06, 0.011702, 0.989541)
bones/44/rotation = Quaternion(0.138071, 0.069343, 0.985006, -0.076754)
bones/45/rotation = Quaternion(-0.14285, -0.00789904, 0.0311869, 0.989221)
bones/46/rotation = Quaternion(0.530767, -0.0216221, -0.0288358, 0.846751)
bones/47/rotation = Quaternion(0.272309, -0.0323592, -0.0145543, 0.961555)
bones/48/rotation = Quaternion(-0.0913429, -0.00885558, 0.995505, -0.0234138)
bones/49/rotation = Quaternion(-0.0897184, 0.0812189, -0.0230736, 0.992382)
bones/50/rotation = Quaternion(0.572011, 0.0100489, -0.0102225, 0.82012)
bones/51/rotation = Quaternion(0.287121, 0.0318998, 0.0141187, 0.957259)

[node name="RightHandAttachment" parent="TestMap/Player/Visuals/Armature/Skeleton3D" index="2"]
transform = Transform3D(0.408504, 0.0278891, 0.912331, 0.911283, 0.0443038, -0.409389, -0.0518372, 0.998629, -0.0073166, -24.8211, 0.0281134, -83.5953)

[node name="LeftHandAttachment" parent="TestMap/Player/Visuals/Armature/Skeleton3D" index="3"]
transform = Transform3D(0.15066, 0.0215593, -0.988351, -0.983621, 0.103339, -0.147684, 0.0989514, 0.994413, 0.0367752, 25.4995, 2.66108, -86.2199)

[node name="RightEquipAttachment" parent="TestMap/Player/Visuals/Armature/Skeleton3D" index="4"]
transform = Transform3D(-0.965173, -0.00342514, -0.261591, -0.261401, 0.0529033, 0.963779, 0.010538, 0.998594, -0.0519561, -9.68416, 0.0322233, -92.566)

[node name="LeftEquipAttachment" parent="TestMap/Player/Visuals/Armature/Skeleton3D" index="5"]
transform = Transform3D(-0.975531, 0.108725, 0.191098, 0.209088, 0.190016, 0.959258, 0.0679831, 0.975742, -0.2081, 8.47907, 1.57299, -91.7023)

[node name="BackRightEquipAttachment" parent="TestMap/Player/Visuals/Armature/Skeleton3D" index="6"]
transform = Transform3D(0.997348, -0.0569319, -0.0453368, 0.0473158, 0.0339089, 0.998304, -0.0552981, -0.997802, 0.0365128, 0.193699, -4.18122, -133.612)

[node name="TestEnemy" parent="TestMap" node_paths=PackedStringArray("Target") instance=ExtResource("4_qau5q")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.6855, 0.565099, 1.45239)
Target = NodePath("../Player")

[node name="UI" type="Control" parent="."]
layout_mode = 3
anchors_preset = 0
offset_right = 1152.0
offset_bottom = 649.0

[node name="DEBUG" parent="UI" node_paths=PackedStringArray("player", "state", "attun", "aiming", "canShoot") instance=ExtResource("3_17a4f")]
offset_left = 13.0
offset_top = 195.0
offset_right = 264.0
offset_bottom = 539.0
player = NodePath("../../TestMap/Player")
state = NodePath("VBoxContainer/State")
attun = NodePath("VBoxContainer/Attun")
aiming = NodePath("VBoxContainer/Aiming")
canShoot = NodePath("VBoxContainer/CanShoot")

[node name="VBoxContainer" type="VBoxContainer" parent="UI/DEBUG"]
layout_mode = 0
offset_right = 192.0
offset_bottom = 290.0

[node name="State" type="Label" parent="UI/DEBUG/VBoxContainer"]
layout_mode = 2
size_flags_horizontal = 0
size_flags_vertical = 0

[node name="Aiming" type="Label" parent="UI/DEBUG/VBoxContainer"]
layout_mode = 2

[node name="CanShoot" type="Label" parent="UI/DEBUG/VBoxContainer"]
layout_mode = 2

[node name="Attun" type="Label" parent="UI/DEBUG/VBoxContainer"]
layout_mode = 2
size_flags_horizontal = 0
size_flags_vertical = 0
text = "Attun: "

[node name="Inventory" parent="UI" node_paths=PackedStringArray("player") instance=ExtResource("5_nsixv")]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = 0.0
offset_top = 0.0
offset_right = 0.0
offset_bottom = 0.0
player = NodePath("../../TestMap/Player")

[node name="OnScreen" type="Control" parent="UI" node_paths=PackedStringArray("stam", "stam_bar")]
anchors_preset = 0
offset_right = 1155.0
offset_bottom = 651.0
script = ExtResource("7_27c3j")
stam = NodePath("../../TestMap/Player/Stamina")
stam_bar = NodePath("StaminaBar")

[node name="StaminaBar" type="ProgressBar" parent="UI/OnScreen"]
layout_mode = 0
offset_left = 14.0
offset_top = 36.0
offset_right = 246.0
offset_bottom = 63.0
theme_override_styles/background = SubResource("StyleBoxFlat_bb8dq")
theme_override_styles/fill = SubResource("StyleBoxFlat_64myj")
max_value = 10.0
value = 3.0
show_percentage = false

[node name="TextureRect" type="TextureRect" parent="UI/OnScreen"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -10.0
offset_top = -10.0
offset_right = 10.0
offset_bottom = 10.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("7_ma0te")

[connection signal="body_exited" from="TestMap/Player/CameraComponent/Area3D" to="TestMap/Player/CameraComponent" method="OnArea3DBodyExited"]
[connection signal="equipped_item" from="UI/Inventory" to="TestMap/Player" method="OnInventoryEquippedItem"]
[connection signal="unequipped_item" from="UI/Inventory" to="TestMap/Player" method="OnInventoryUnequippedItem"]

[editable path="TestMap/Player"]
[editable path="TestMap/Player/CameraComponent"]
