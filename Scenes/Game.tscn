[gd_scene load_steps=14 format=3 uid="uid://b03dm5foy3tid"]

[ext_resource type="Script" path="res://Scenes/Game.gd" id="1_01bgg"]
[ext_resource type="PackedScene" uid="uid://bumue5pppiwug" path="res://Scenes/Maps/TestMap.tscn" id="1_82oit"]
[ext_resource type="PackedScene" uid="uid://degt6oc40mi1t" path="res://Scenes/Models/Player/Player.tscn" id="1_ctsb1"]
[ext_resource type="PackedScene" uid="uid://dlfpn58g0wlys" path="res://Scenes/UI/Debug.tscn" id="3_17a4f"]
[ext_resource type="Script" path="res://Classes/Map.cs" id="3_yad68"]
[ext_resource type="PackedScene" uid="uid://bwcnco5r8xygd" path="res://Scenes/Models/TestEnemy/TestEnemy.tscn" id="4_qau5q"]
[ext_resource type="PackedScene" uid="uid://yb43ks5ned6a" path="res://Scenes/UI/NewInventory/inventory.tscn" id="5_nsixv"]
[ext_resource type="Script" path="res://Scenes/UI/OnScreen/OnScreen.cs" id="7_27c3j"]
[ext_resource type="Texture2D" uid="uid://ddc422hhrh3xp" path="res://Assets/Icons/add.svg" id="7_ma0te"]

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_bb8dq"]
border_width_left = 2
border_width_top = 2
border_width_right = 2
border_width_bottom = 2
border_color = Color(0, 0, 0, 1)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_64myj"]
bg_color = Color(0.192157, 0.537255, 0.207843, 1)
border_width_left = 2
border_width_top = 2
border_width_bottom = 2
border_color = Color(0, 0, 0, 1)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_nei27"]
border_width_left = 2
border_width_top = 2
border_width_right = 2
border_color = Color(0, 0, 0, 1)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_yom12"]
bg_color = Color(0.866667, 0.227451, 0.164706, 1)
border_width_left = 2
border_width_top = 2
border_color = Color(0.00392157, 0.00392157, 0.00392157, 1)

[node name="Game" type="Node"]
script = ExtResource("1_01bgg")

[node name="TestMap" parent="." instance=ExtResource("1_82oit")]
script = ExtResource("3_yad68")

[node name="Player" parent="TestMap" instance=ExtResource("1_ctsb1")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.633851, 0)

[node name="Skeleton3D" parent="TestMap/Player/Visuals/Armature" index="0"]
bones/0/position = Vector3(0.017062, 0.338937, -98.8023)
bones/0/rotation = Quaternion(-0.726712, -0.0512565, 0.0128478, 0.684907)
bones/1/rotation = Quaternion(-0.0298819, 0.0143319, 0.0224719, 0.999198)
bones/2/rotation = Quaternion(0.0109808, 0.00266739, 0.0136544, 0.999843)
bones/3/rotation = Quaternion(0.0680189, 0.00350621, 0.0133771, 0.997588)
bones/4/rotation = Quaternion(0.050204, -0.00174113, 0.00310633, 0.998733)
bones/5/rotation = Quaternion(-0.0707848, 0.00753199, -0.000480846, 0.997463)
bones/6/rotation = Quaternion(-0.59647, -0.436519, 0.510653, -0.439213)
bones/7/rotation = Quaternion(0.540911, 0.181308, 0.204563, 0.795423)
bones/8/rotation = Quaternion(-8.51638e-09, -4.68689e-08, 0.0156211, 0.999878)
bones/9/rotation = Quaternion(0.048996, -0.272176, 0.0262606, 0.96064)
bones/11/rotation = Quaternion(-0.139962, 0.0845331, -0.237263, 0.957586)
bones/12/rotation = Quaternion(-0.122338, -0.0684816, 0.0250949, 0.989805)
bones/13/rotation = Quaternion(0.0705189, 0.000552059, 0.00813712, 0.997477)
bones/14/rotation = Quaternion(0.15024, -9.64784e-07, -0.015402, 0.98853)
bones/15/rotation = Quaternion(0.0720729, -1.31672e-07, -0.00738581, 0.997372)
bones/16/rotation = Quaternion(0.140747, -0.00388349, -0.0236878, 0.989755)
bones/17/rotation = Quaternion(0.149753, -2.25414e-08, -0.0153462, 0.988604)
bones/18/rotation = Quaternion(0.158546, -1.70754e-07, -0.0162472, 0.987218)
bones/19/rotation = Quaternion(0.185865, -0.00436341, -0.0325604, 0.982026)
bones/20/rotation = Quaternion(0.180968, -1.56195e-06, -0.0185535, 0.983314)
bones/21/rotation = Quaternion(0.156164, -1.58656e-07, -0.0160032, 0.987602)
bones/22/rotation = Quaternion(0.236203, -0.00374449, -0.0487786, 0.970472)
bones/23/rotation = Quaternion(0.151301, -5.61338e-05, -0.0158701, 0.98836)
bones/24/rotation = Quaternion(0.143674, 3.30508e-05, -0.0144955, 0.989519)
bones/25/rotation = Quaternion(0.600609, -0.433814, 0.525832, 0.417821)
bones/26/rotation = Quaternion(0.463119, -0.259106, -0.23089, 0.815521)
bones/27/rotation = Quaternion(1.3788e-06, 1.1341e-07, -0.0622308, 0.998062)
bones/28/rotation = Quaternion(0.0544848, 0.169763, -0.00887176, 0.983938)
bones/30/rotation = Quaternion(-0.141937, -0.07392, 0.27348, 0.948472)
bones/31/rotation = Quaternion(-0.155127, 0.0746149, -0.026498, 0.984716)
bones/32/rotation = Quaternion(0.0632219, -0.00050578, -0.0118174, 0.997929)
bones/33/rotation = Quaternion(0.153217, 6.96751e-07, 0.0124855, 0.988114)
bones/34/rotation = Quaternion(0.0710634, -5.60453e-08, 0.00578902, 0.997455)
bones/35/rotation = Quaternion(0.13212, 0.00391848, 0.018522, 0.991053)
bones/36/rotation = Quaternion(0.15653, 2.68719e-07, 0.0127513, 0.987591)
bones/37/rotation = Quaternion(0.16081, 2.17647e-08, 0.0131001, 0.986898)
bones/38/rotation = Quaternion(0.178414, 0.0045846, 0.0264176, 0.98359)
bones/39/rotation = Quaternion(0.189125, 1.70099e-06, 0.0154143, 0.981832)
bones/40/rotation = Quaternion(0.157217, 8.59636e-08, 0.0128074, 0.987481)
bones/41/rotation = Quaternion(0.22896, 0.00371221, 0.0425456, 0.972499)
bones/42/rotation = Quaternion(0.154713, 1.39564e-06, 0.0126133, 0.987879)
bones/43/rotation = Quaternion(0.143748, -1.14465e-06, 0.0116998, 0.989545)
bones/44/rotation = Quaternion(0.1345, 0.0831942, 0.984369, -0.0774974)
bones/45/rotation = Quaternion(-0.138813, -0.0127695, 0.0293944, 0.9898)
bones/46/rotation = Quaternion(0.535494, -0.0203933, -0.0252295, 0.843916)
bones/47/rotation = Quaternion(0.270022, -0.0323725, -0.0145787, 0.962199)
bones/48/rotation = Quaternion(-0.0909841, -0.0193836, 0.995386, -0.0234955)
bones/49/rotation = Quaternion(-0.086957, 0.0810777, -0.0236539, 0.992626)
bones/50/rotation = Quaternion(0.562389, 0.00984067, -0.00503232, 0.826799)
bones/51/rotation = Quaternion(0.292132, 0.0326397, 0.014234, 0.955715)

[node name="RightHandAttachment" parent="TestMap/Player/Visuals/Armature/Skeleton3D" index="2"]
transform = Transform3D(0.408633, 0.026062, 0.912326, 0.909427, 0.0729397, -0.409418, -0.0772151, 0.996996, 0.00610428, -24.4843, 0.597903, -83.9611)

[node name="LeftHandAttachment" parent="TestMap/Player/Visuals/Armature/Skeleton3D" index="3"]
transform = Transform3D(0.147772, 0.00868659, -0.988983, -0.986787, 0.0684755, -0.146842, 0.0664457, 0.997615, 0.0186906, 26.0841, 1.28666, -86.0033)

[node name="RightEquipAttachment" parent="TestMap/Player/Visuals/Armature/Skeleton3D" index="4"]
transform = Transform3D(-0.963134, -0.0037222, -0.268997, -0.268998, 0.0269657, 0.962763, 0.00367012, 0.999629, -0.026973, -9.4308, -0.18012, -92.6351)

[node name="LeftEquipAttachment" parent="TestMap/Player/Visuals/Armature/Skeleton3D" index="5"]
transform = Transform3D(-0.978582, 0.105842, 0.176561, 0.195768, 0.213304, 0.957171, 0.0636477, 0.971236, -0.229456, 8.71612, 1.5006, -91.693)

[node name="BackRightEquipAttachment" parent="TestMap/Player/Visuals/Armature/Skeleton3D" index="6"]
transform = Transform3D(0.998097, -0.0452391, -0.0419118, 0.0435349, 0.0355096, 0.998421, -0.0436794, -0.998345, 0.0374114, 0.723412, -4.1754, -133.657)

[node name="TestEnemy" parent="TestMap" instance=ExtResource("4_qau5q")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.6855, 5.85878, 3.65744)

[node name="PlayerUI" type="Control" parent="."]
layout_mode = 3
anchors_preset = 0
offset_right = 1152.0
offset_bottom = 649.0

[node name="DEBUG" parent="PlayerUI" node_paths=PackedStringArray("player", "state", "attun", "aiming", "canShoot") instance=ExtResource("3_17a4f")]
offset_left = 13.0
offset_top = 195.0
offset_right = 264.0
offset_bottom = 539.0
player = NodePath("../../TestMap/Player")
state = NodePath("VBoxContainer/State")
attun = NodePath("VBoxContainer/Attun")
aiming = NodePath("VBoxContainer/Aiming")
canShoot = NodePath("VBoxContainer/CanShoot")

[node name="VBoxContainer" type="VBoxContainer" parent="PlayerUI/DEBUG"]
layout_mode = 0
offset_right = 192.0
offset_bottom = 290.0

[node name="State" type="Label" parent="PlayerUI/DEBUG/VBoxContainer"]
layout_mode = 2
size_flags_horizontal = 0
size_flags_vertical = 0

[node name="Aiming" type="Label" parent="PlayerUI/DEBUG/VBoxContainer"]
layout_mode = 2

[node name="CanShoot" type="Label" parent="PlayerUI/DEBUG/VBoxContainer"]
layout_mode = 2

[node name="Attun" type="Label" parent="PlayerUI/DEBUG/VBoxContainer"]
layout_mode = 2
size_flags_horizontal = 0
size_flags_vertical = 0
text = "Attun: "

[node name="Inventory" parent="PlayerUI" node_paths=PackedStringArray("player") instance=ExtResource("5_nsixv")]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = 0.0
offset_top = 0.0
offset_right = 0.0
offset_bottom = 0.0
player = NodePath("../../TestMap/Player")

[node name="OnScreen" type="Control" parent="PlayerUI" node_paths=PackedStringArray("stam", "health", "stamBar", "healthBar")]
anchors_preset = 0
offset_right = 1155.0
offset_bottom = 651.0
script = ExtResource("7_27c3j")
stam = NodePath("../../TestMap/Player/Stamina")
health = NodePath("../../TestMap/Player/Health")
stamBar = NodePath("StaminaBar")
healthBar = NodePath("HealthBar")

[node name="StaminaBar" type="ProgressBar" parent="PlayerUI/OnScreen"]
layout_mode = 1
anchors_preset = -1
anchor_left = 0.012
anchor_top = 0.055
anchor_right = 0.213
anchor_bottom = 0.097
offset_left = 0.14
offset_top = 0.194996
offset_right = -0.0150146
offset_bottom = -0.147003
theme_override_styles/background = SubResource("StyleBoxFlat_bb8dq")
theme_override_styles/fill = SubResource("StyleBoxFlat_64myj")
max_value = 10.0
value = 3.0
show_percentage = false

[node name="HealthBar" type="ProgressBar" parent="PlayerUI/OnScreen"]
layout_mode = 0
offset_left = 14.0
offset_top = 9.0
offset_right = 246.0
offset_bottom = 36.0
theme_override_styles/background = SubResource("StyleBoxFlat_nei27")
theme_override_styles/fill = SubResource("StyleBoxFlat_yom12")
value = 5.0
show_percentage = false

[node name="TextureRect" type="TextureRect" parent="PlayerUI/OnScreen"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -10.0
offset_top = -10.0
offset_right = 10.0
offset_bottom = 10.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("7_ma0te")

[connection signal="body_exited" from="TestMap/Player/CameraComponent/Area3D" to="TestMap/Player/CameraComponent" method="OnArea3DBodyExited"]
[connection signal="equipped_item" from="PlayerUI/Inventory" to="TestMap/Player" method="OnInventoryEquippedItem"]
[connection signal="unequipped_item" from="PlayerUI/Inventory" to="TestMap/Player" method="OnInventoryUnequippedItem"]

[editable path="TestMap/Player"]
[editable path="TestMap/Player/CameraComponent"]
