[gd_scene load_steps=12 format=3 uid="uid://b03dm5foy3tid"]

[ext_resource type="Script" path="res://Scenes/Game.gd" id="1_01bgg"]
[ext_resource type="PackedScene" uid="uid://bumue5pppiwug" path="res://Scenes/Maps/TestMap.tscn" id="1_82oit"]
[ext_resource type="PackedScene" uid="uid://degt6oc40mi1t" path="res://Scenes/Models/Player/Player.tscn" id="1_ctsb1"]
[ext_resource type="PackedScene" uid="uid://dlfpn58g0wlys" path="res://Scenes/UI/Debug.tscn" id="3_17a4f"]
[ext_resource type="Script" path="res://Classes/Map.cs" id="3_yad68"]
[ext_resource type="PackedScene" uid="uid://bwcnco5r8xygd" path="res://Scenes/Models/TestEnemy/TestEnemy.tscn" id="4_qau5q"]
[ext_resource type="PackedScene" uid="uid://yb43ks5ned6a" path="res://Scenes/UI/NewInventory/inventory.tscn" id="5_nsixv"]
[ext_resource type="Script" path="res://Scenes/UI/OnScreen/OnScreen.cs" id="7_27c3j"]
[ext_resource type="Texture2D" uid="uid://ddc422hhrh3xp" path="res://Assets/Icons/add.svg" id="7_ma0te"]

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_bb8dq"]
border_width_left = 2
border_width_top = 2
border_width_right = 2
border_width_bottom = 2
border_color = Color(0, 0, 0, 1)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_64myj"]
bg_color = Color(0.192157, 0.537255, 0.207843, 1)
border_width_left = 2
border_width_top = 2
border_width_right = 2
border_width_bottom = 2
border_color = Color(0, 0, 0, 1)

[node name="Game" type="Node"]
script = ExtResource("1_01bgg")

[node name="TestMap" parent="." instance=ExtResource("1_82oit")]
script = ExtResource("3_yad68")

[node name="Player" parent="TestMap" instance=ExtResource("1_ctsb1")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.633851, 0)

[node name="Skeleton3D" parent="TestMap/Player/Visuals/Armature" index="0"]
bones/0/position = Vector3(-0.266878, 0.582575, -98.9944)
bones/0/rotation = Quaternion(-0.728201, -0.0472639, 0.0132333, 0.683604)
bones/1/rotation = Quaternion(-0.0329954, 0.0121124, 0.0227819, 0.999122)
bones/2/rotation = Quaternion(0.0100263, 0.0010577, 0.0137708, 0.999854)
bones/3/rotation = Quaternion(0.0672961, 0.00205063, 0.0137605, 0.997636)
bones/4/rotation = Quaternion(0.0478913, -0.00107588, 0.00460253, 0.998841)
bones/5/rotation = Quaternion(-0.0662626, 0.0109322, -0.002039, 0.99774)
bones/6/rotation = Quaternion(-0.592568, -0.440575, 0.51071, -0.440377)
bones/7/rotation = Quaternion(0.545926, 0.18442, 0.204512, 0.791283)
bones/8/rotation = Quaternion(-4.48326e-08, -7.62159e-08, 0.0167606, 0.99986)
bones/9/rotation = Quaternion(0.0512514, -0.269144, 0.0259591, 0.961385)
bones/11/rotation = Quaternion(-0.139569, 0.0853055, -0.235412, 0.958032)
bones/12/rotation = Quaternion(-0.122154, -0.0689816, 0.0242566, 0.989814)
bones/13/rotation = Quaternion(0.0689648, 0.000201705, 0.00955232, 0.997573)
bones/14/rotation = Quaternion(0.150269, -9.65419e-07, -0.015405, 0.988525)
bones/15/rotation = Quaternion(0.0721017, -1.31382e-07, -0.00738876, 0.99737)
bones/16/rotation = Quaternion(0.139593, -0.00390755, -0.0234146, 0.989924)
bones/17/rotation = Quaternion(0.149765, -2.33567e-08, -0.0153474, 0.988603)
bones/18/rotation = Quaternion(0.158558, -1.68007e-07, -0.0162484, 0.987216)
bones/19/rotation = Quaternion(0.184823, -0.00437213, -0.0324101, 0.982227)
bones/20/rotation = Quaternion(0.180981, -1.55919e-06, -0.0185548, 0.983312)
bones/21/rotation = Quaternion(0.156177, -1.5977e-07, -0.0160045, 0.987599)
bones/22/rotation = Quaternion(0.235711, -0.00319259, -0.0498223, 0.97054)
bones/23/rotation = Quaternion(0.151426, -5.6179e-05, -0.015883, 0.988341)
bones/24/rotation = Quaternion(0.1438, 3.3079e-05, -0.0145084, 0.9895)
bones/25/rotation = Quaternion(0.598502, -0.436205, 0.527212, 0.416615)
bones/26/rotation = Quaternion(0.460313, -0.261329, -0.233179, 0.815749)
bones/27/rotation = Quaternion(1.29716e-06, 1.27888e-07, -0.0640721, 0.997945)
bones/28/rotation = Quaternion(0.0564171, 0.169007, -0.00379057, 0.983992)
bones/30/rotation = Quaternion(-0.142127, -0.0737695, 0.273255, 0.94852)
bones/31/rotation = Quaternion(-0.155133, 0.0745983, -0.026535, 0.984716)
bones/32/rotation = Quaternion(0.0640473, -0.000344123, -0.0119303, 0.997876)
bones/33/rotation = Quaternion(0.153213, 6.94787e-07, 0.0124851, 0.988114)
bones/34/rotation = Quaternion(0.0710592, -5.67579e-08, 0.00578867, 0.997455)
bones/35/rotation = Quaternion(0.133201, 0.00407649, 0.0183306, 0.990911)
bones/36/rotation = Quaternion(0.156598, 2.72287e-07, 0.0127569, 0.98758)
bones/37/rotation = Quaternion(0.160877, 2.17383e-08, 0.0131056, 0.986887)
bones/38/rotation = Quaternion(0.179002, 0.00470651, 0.0262355, 0.983488)
bones/39/rotation = Quaternion(0.189142, 1.70385e-06, 0.0154157, 0.981829)
bones/40/rotation = Quaternion(0.157245, 8.42647e-08, 0.0128097, 0.987477)
bones/41/rotation = Quaternion(0.229541, 0.00391291, 0.0423709, 0.972369)
bones/42/rotation = Quaternion(0.154723, 1.39505e-06, 0.0126141, 0.987877)
bones/43/rotation = Quaternion(0.143751, -1.1437e-06, 0.0117001, 0.989545)
bones/44/rotation = Quaternion(0.133365, 0.0739564, 0.985463, -0.0748761)
bones/45/rotation = Quaternion(-0.129371, -0.0144572, 0.0309694, 0.991007)
bones/46/rotation = Quaternion(0.532408, -0.0223373, -0.0286367, 0.845709)
bones/47/rotation = Quaternion(0.269572, -0.0323744, -0.0145873, 0.962326)
bones/48/rotation = Quaternion(-0.0919933, -0.0211307, 0.995248, -0.023913)
bones/49/rotation = Quaternion(-0.076699, 0.0796399, -0.0246574, 0.993563)
bones/50/rotation = Quaternion(0.572238, 0.0095782, -0.00893386, 0.819983)
bones/51/rotation = Quaternion(0.285502, 0.0319075, 0.0141506, 0.957742)

[node name="RightHandAttachment" parent="TestMap/Player/Visuals/Armature/Skeleton3D" index="2"]
transform = Transform3D(0.405864, 0.0272769, 0.913526, 0.910075, 0.0796908, -0.40671, -0.0838934, 0.996446, 0.00751953, -24.918, 1.10672, -84.0696)

[node name="LeftHandAttachment" parent="TestMap/Player/Visuals/Armature/Skeleton3D" index="3"]
transform = Transform3D(0.156516, 0.00996842, -0.987625, -0.985126, 0.0733798, -0.155379, 0.0709229, 0.997254, 0.0213051, 25.8551, 1.50266, -86.524)

[node name="RightEquipAttachment" parent="TestMap/Player/Visuals/Armature/Skeleton3D" index="4"]
transform = Transform3D(-0.963971, 0.00375881, -0.26598, -0.265778, 0.0278057, 0.963633, 0.0110179, 0.999606, -0.0258049, -9.68104, 0.139638, -92.7699)

[node name="LeftEquipAttachment" parent="TestMap/Player/Visuals/Armature/Skeleton3D" index="5"]
transform = Transform3D(-0.97809, 0.106324, 0.178984, 0.197307, 0.199177, 0.959895, 0.0664106, 0.974179, -0.215791, 8.47988, 1.72604, -91.9408)

[node name="BackRightEquipAttachment" parent="TestMap/Player/Visuals/Armature/Skeleton3D" index="6"]
transform = Transform3D(0.997503, -0.0530847, -0.0465792, 0.0477761, 0.0215056, 0.998627, -0.0520101, -0.998358, 0.0239881, 0.206117, -4.26365, -133.812)

[node name="TestEnemy" parent="TestMap" instance=ExtResource("4_qau5q")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.6855, 0.565099, 3.65744)

[node name="PlayerUI" type="Control" parent="."]
layout_mode = 3
anchors_preset = 0
offset_right = 1152.0
offset_bottom = 649.0

[node name="DEBUG" parent="PlayerUI" node_paths=PackedStringArray("player", "state", "attun", "aiming", "canShoot") instance=ExtResource("3_17a4f")]
offset_left = 13.0
offset_top = 195.0
offset_right = 264.0
offset_bottom = 539.0
player = NodePath("../../TestMap/Player")
state = NodePath("VBoxContainer/State")
attun = NodePath("VBoxContainer/Attun")
aiming = NodePath("VBoxContainer/Aiming")
canShoot = NodePath("VBoxContainer/CanShoot")

[node name="VBoxContainer" type="VBoxContainer" parent="PlayerUI/DEBUG"]
layout_mode = 0
offset_right = 192.0
offset_bottom = 290.0

[node name="State" type="Label" parent="PlayerUI/DEBUG/VBoxContainer"]
layout_mode = 2
size_flags_horizontal = 0
size_flags_vertical = 0

[node name="Aiming" type="Label" parent="PlayerUI/DEBUG/VBoxContainer"]
layout_mode = 2

[node name="CanShoot" type="Label" parent="PlayerUI/DEBUG/VBoxContainer"]
layout_mode = 2

[node name="Attun" type="Label" parent="PlayerUI/DEBUG/VBoxContainer"]
layout_mode = 2
size_flags_horizontal = 0
size_flags_vertical = 0
text = "Attun: "

[node name="Inventory" parent="PlayerUI" node_paths=PackedStringArray("player") instance=ExtResource("5_nsixv")]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = 0.0
offset_top = 0.0
offset_right = 0.0
offset_bottom = 0.0
player = NodePath("../../TestMap/Player")

[node name="OnScreen" type="Control" parent="PlayerUI" node_paths=PackedStringArray("stam", "stam_bar")]
anchors_preset = 0
offset_right = 1155.0
offset_bottom = 651.0
script = ExtResource("7_27c3j")
stam = NodePath("../../TestMap/Player/Stamina")
stam_bar = NodePath("StaminaBar")

[node name="StaminaBar" type="ProgressBar" parent="PlayerUI/OnScreen"]
layout_mode = 0
offset_left = 14.0
offset_top = 36.0
offset_right = 246.0
offset_bottom = 63.0
theme_override_styles/background = SubResource("StyleBoxFlat_bb8dq")
theme_override_styles/fill = SubResource("StyleBoxFlat_64myj")
max_value = 10.0
value = 3.0
show_percentage = false

[node name="TextureRect" type="TextureRect" parent="PlayerUI/OnScreen"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -10.0
offset_top = -10.0
offset_right = 10.0
offset_bottom = 10.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("7_ma0te")

[connection signal="body_exited" from="TestMap/Player/CameraComponent/Area3D" to="TestMap/Player/CameraComponent" method="OnArea3DBodyExited"]
[connection signal="equipped_item" from="PlayerUI/Inventory" to="TestMap/Player" method="OnInventoryEquippedItem"]
[connection signal="unequipped_item" from="PlayerUI/Inventory" to="TestMap/Player" method="OnInventoryUnequippedItem"]

[editable path="TestMap/Player"]
[editable path="TestMap/Player/CameraComponent"]
